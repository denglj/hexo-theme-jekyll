mixin date(date)
    .post-time
        != full_date(new Date(), 'dddd, MMMM Do YYYY')

mixin tag(tags)
    ul.post-tag-list
        - tags.each(function(tag) {
            li.post-tag-item
                a(href=config.root + tag.path).post-tag-link
                    != tag.name
        - })

mixin postInfo(item)
    .post-meta
        if item.tags && item.tags.length !== 0
            +tag(item.tags)
        +date(item.date)

mixin homePost()
    .home
        if is_home()
            - var chgs = site.categories.findOne({name: 'challenges'}).posts.sort('date', -1).toArray()
            - var chg = chgs[0]
            article.post-block
                h2.post-title
                    a.post-title-link(href= url_for(chg.path))
                        != chg.title
                    .post-badge-wrap
                        .post-badge
                            span.post-badge-msg!= "挑战 №"
                            span.post-num!= chgs.length
                .post-meta
                    +date(chg.date)
                .post-content
                    != chg.excerpt
                .read-more
                    a(href=config.root + chg.path)
                        != __('excerpt_link.title')
                br
                .read-more
                    != config.description

mixin archivePost()
    .archive
        ul.post-list
            - page.posts.each(function(item, index) {
                li.post-list-item
                    article.post-block
                        h2.post-title
                            a.post-title-link(href= url_for(item.path))
                                != item.title
                        +postInfo(item)
                        .post-content
                            != item.excerpt
            - })
        include ../_components/pagination

mixin postList(item)
    .post
        article.post-block
            h2.post-title
                a.post-title-link(href=url_for(item.path))
                    != item.title
            +postInfo(item)
            .post-content
                != item.content
        include ../_components/pagination
